# Ratchet Workflow Engine Configuration
#
# This file orchestrates the Ratchet autonomous agent platform using the
# GoCodeAlone/workflow engine. Domain-specific routes are split into config/
# files for maintainability.
#
# Architecture:
#   React UI -> static.fileserver
#   REST API -> http.router -> middleware -> pipeline steps -> SQLite
#   SSE      -> ratchet.sse_hub (GET /events)
#   Schedule -> agent-tick pipeline (every minute)
#
# File Organization:
#   config/modules.yaml          - Infrastructure modules (15 modules)
#   config/routes-core.yaml      - Public routes (status, auth, version, info)
#   config/routes-agents.yaml    - Agent management (12 routes)
#   config/routes-tasks.yaml     - Task management (5 routes)
#   config/routes-providers.yaml - AI provider management (8 routes)
#   config/routes-projects.yaml  - Projects, repos, containers (12 routes)
#   config/routes-system.yaml    - System routes (secrets, vault, MCP, etc.)
#   config/pipelines.yaml        - Background processing pipelines
#   config/triggers.yaml         - Scheduled triggers

sidecars:
  - name: ts-sidecar
    type: sidecar.tailscale
    config:
      hostname: ratchet
      auth_key_secret: tsauth
      serve:
        port: 443
        backend_port: 9090

imports:
  - config/modules.yaml
  - config/routes-core.yaml
  - config/routes-agents.yaml
  - config/routes-tasks.yaml
  - config/routes-providers.yaml
  - config/routes-projects.yaml
  - config/routes-system.yaml
  - config/pipelines.yaml
  - config/triggers.yaml
